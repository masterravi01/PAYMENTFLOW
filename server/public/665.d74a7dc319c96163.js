"use strict";(self.webpackChunkrss=self.webpackChunkrss||[]).push([[665],{8665:(I,h,i)=>{i.r(h),i.d(h,{LoginOperationModule:()=>Z});var d=i(6895),l=i(3599),o=i(433),t=i(1571),a=i(262),g=i(2843),c=i(2340),m=i(7206),f=i(529);let u=(()=>{class s{constructor(e){this._http=e,this.BaseURL=c.N.backendurl,this.httpOptions={withCredentials:!0},this.encrypt=r=>{const n=c.N.DECRYPT,p=n?n.slice(0,16):"";return m.AES.encrypt(r,m.enc.Utf8.parse(n),{iv:m.enc.Utf8.parse(p),mode:m.mode.CTR,padding:m.pad.NoPadding}).toString()}}userLogin(e){return e.Password&&(e.Password=this.encrypt(e.Password)),this._http.post(this.BaseURL+"/login/userlogin",e,this.httpOptions).pipe((0,a.K)(this.handleError))}userSignup(e){return e.User?.Password&&(e.User.Password=this.encrypt(e.User.Password)),this._http.post(this.BaseURL+"/login/userSignup",e,this.httpOptions).pipe((0,a.K)(this.handleError))}checkUserExist(e){return this._http.post(this.BaseURL+"/login/checkUserExist",e,this.httpOptions).pipe((0,a.K)(this.handleError))}forgotPassword(e){return this._http.post(this.BaseURL+"/login/forgot_password",e,this.httpOptions).pipe((0,a.K)(this.handleError))}checkResetToken(e){return this._http.post(this.BaseURL+"/login/check_reset_token",e,this.httpOptions).pipe((0,a.K)(this.handleError))}resetPassword(e){return e.User?.Password&&(e.User.Password=this.encrypt(e.User.Password)),this._http.post(this.BaseURL+"/login/reset_password",e,this.httpOptions).pipe((0,a.K)(this.handleError))}handleError(e){return console.log(e),"Authentication token expired, please login again"==e.error.statusMessage&&(localStorage.clear(),window.location.href=c.N.url+"login"),(0,g._)(e.error)}static#t=this.\u0275fac=function(r){return new(r||s)(t.LFG(f.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();function w(s,S){if(1&s&&(t.ynx(0),t.TgZ(1,"div"),t._uU(2),t.qZA(),t.BQk()),2&s){const e=t.oxw();t.xp6(2),t.hij("Welcome, ",e.userProfile.name,"")}}const P=[{path:"signup",component:(()=>{class s{constructor(e,r){this.router=e,this._LOS=r}ngOnInit(){this.SignupForm=new o.cw({FirstName:new o.NI("",[o.kI.required]),LastName:new o.NI("",[o.kI.required]),Phone:new o.NI("",[o.kI.required]),Email:new o.NI("",[o.kI.required,o.kI.email]),Password:new o.NI("",[o.kI.required,o.kI.minLength(8)]),ConfirmPassword:new o.NI("",[o.kI.required,o.kI.minLength(8)]),GoogleSubId:new o.NI(""),ProfilePic:new o.NI("")}),sessionStorage.getItem("loggedInUser")&&(this.userProfile=JSON.parse(sessionStorage.getItem("loggedInUser")||""),this._LOS.checkUserExist(this.userProfile).subscribe(e=>{console.log(e),e.data.Users.length>0?this.router.navigateByUrl("/dashboard"):(this.SignupForm.controls.FirstName.setValue(this.userProfile?.given_name),this.SignupForm.controls.LastName.setValue(this.userProfile?.family_name),this.SignupForm.controls.Email.setValue(this.userProfile?.email),this.SignupForm.controls.ProfilePic.setValue(this.userProfile?.picture),this.SignupForm.controls.GoogleSubId.setValue(this.userProfile?.sub))},e=>{console.log(e)}))}checkUser(){}signup(){this._LOS.userSignup({User:this.SignupForm?.value}).subscribe(e=>{console.log(e)},e=>{console.log(e)})}static#t=this.\u0275fac=function(r){return new(r||s)(t.Y36(l.F0),t.Y36(u))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-signup"]],decls:30,vars:2,consts:[[4,"ngIf"],[1,"container"],[1,"login-form",3,"formGroup","ngSubmit"],["type","email","name","Email","formControlName","Email",1,"form-control"],["type","text","formControlName","FirstName","name","FirstName",1,"form-control"],["type","text","formControlName","LastName","name","LastName",1,"form-control"],["type","text","formControlName","Phone","name","Phone",1,"form-control"],["type","password","formControlName","Password","name","password",1,"form-control"],["type","text","formControlName","ConfirmPassword","name","ConfirmPassword",1,"form-control"],["type","submit"]],template:function(r,n){1&r&&(t._UZ(0,"br"),t.YNc(1,w,3,1,"ng-container",0),t.TgZ(2,"div",1)(3,"form",2),t.NdJ("ngSubmit",function(){return n.signup()}),t.TgZ(4,"div")(5,"label"),t._uU(6,"Username:"),t.qZA(),t._UZ(7,"input",3),t.qZA(),t.TgZ(8,"div")(9,"label"),t._uU(10,"FirstName:"),t.qZA(),t._UZ(11,"input",4),t.qZA(),t.TgZ(12,"div")(13,"label"),t._uU(14,"LastName:"),t.qZA(),t._UZ(15,"input",5),t.qZA(),t.TgZ(16,"div")(17,"label"),t._uU(18,"Phone:"),t.qZA(),t._UZ(19,"input",6),t.qZA(),t.TgZ(20,"div")(21,"label"),t._uU(22,"Password:"),t.qZA(),t._UZ(23,"input",7),t.qZA(),t.TgZ(24,"div")(25,"label"),t._uU(26,"ConfirmPassword:"),t.qZA(),t._UZ(27,"input",8),t.qZA(),t.TgZ(28,"button",9),t._uU(29,"Login"),t.qZA()()()),2&r&&(t.xp6(1),t.Q6J("ngIf",n.userProfile),t.xp6(2),t.Q6J("formGroup",n.SignupForm))},dependencies:[d.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return s})()},{path:"forgotpassword",component:(()=>{class s{constructor(e){this._LOS=e}ngOnInit(){this.PasswordForm=new o.cw({Email:new o.NI("",[o.kI.required,o.kI.email])})}forgotPW(){this._LOS.forgotPassword(this.PasswordForm.value).subscribe(e=>{console.log(e)},e=>{console.log(e)})}static#t=this.\u0275fac=function(r){return new(r||s)(t.Y36(u))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-forgot-password"]],decls:8,vars:1,consts:[[1,"login-form",3,"formGroup"],["type","email","name","username","formControlName","Email",1,"form-control"],[1,"btn","btn-primary",3,"click"]],template:function(r,n){1&r&&(t.TgZ(0,"div")(1,"form",0)(2,"div")(3,"label"),t._uU(4,"EmailID:"),t.qZA(),t._UZ(5,"input",1),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(){return n.forgotPW()}),t._uU(7,"Request"),t.qZA()()()),2&r&&(t.xp6(1),t.Q6J("formGroup",n.PasswordForm))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return s})()},{path:"resetpassword/:token",component:(()=>{class s{constructor(e,r,n){this.router=e,this._LOS=r,this._Route=n}ngOnInit(){this.ResetForm=new o.cw({Email:new o.NI("",[o.kI.required,o.kI.email]),Password:new o.NI("",[o.kI.required,o.kI.minLength(8)]),ConfirmPassword:new o.NI("",[o.kI.required,o.kI.minLength(8)])});let e=this._Route.snapshot.paramMap.get("token");this._LOS.checkResetToken({Token:e}).subscribe(r=>{console.log(r),this.ResetForm.controls.Email.setValue(r.data.User.Email)},r=>{console.log(r)})}ResetPW(){this._LOS.resetPassword({User:this.ResetForm?.value}).subscribe(e=>{console.log(e)},e=>{console.log(e)})}static#t=this.\u0275fac=function(r){return new(r||s)(t.Y36(l.F0),t.Y36(u),t.Y36(l.gz))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-reset-password"]],decls:16,vars:1,consts:[[1,"container"],[1,"login-form",3,"formGroup"],["type","email","name","Email","formControlName","Email",1,"form-control"],["type","password","formControlName","Password","name","password",1,"form-control"],["type","text","formControlName","ConfirmPassword","name","ConfirmPassword",1,"form-control"],[1,"btn","btn-primary",3,"click"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div")(3,"label"),t._uU(4,"EmailId:"),t.qZA(),t._UZ(5,"input",2),t.qZA(),t.TgZ(6,"div")(7,"label"),t._uU(8,"Password:"),t.qZA(),t._UZ(9,"input",3),t.qZA(),t.TgZ(10,"div")(11,"label"),t._uU(12,"ConfirmPassword:"),t.qZA(),t._UZ(13,"input",4),t.qZA(),t.TgZ(14,"button",5),t.NdJ("click",function(){return n.ResetPW()}),t._uU(15,"Confirm"),t.qZA()()()),2&r&&(t.xp6(1),t.Q6J("formGroup",n.ResetForm))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]})}return s})()}];let U=(()=>{class s{static#t=this.\u0275fac=function(r){return new(r||s)};static#e=this.\u0275mod=t.oAB({type:s});static#o=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(P),l.Bz]})}return s})(),Z=(()=>{class s{static#t=this.\u0275fac=function(r){return new(r||s)};static#e=this.\u0275mod=t.oAB({type:s});static#o=this.\u0275inj=t.cJS({imports:[d.ez,U,o.UX,o.u5]})}return s})()}}]);